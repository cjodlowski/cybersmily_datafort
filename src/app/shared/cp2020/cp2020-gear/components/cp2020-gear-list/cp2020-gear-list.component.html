<div class="chargen-section">
  <div class="chargen-label row g-0">
    <div class="col">
      <h4
        #gearTitleElem
        class="d-inline-block csd-btn me-4"
        (click)="isCollapsed = !isCollapsed"
        (keyup.enter)="isCollapsed = !isCollapsed"
        tabindex="0"
      >
        GEAR
        <fa-icon
          [icon]="collapseChevron"
          class="csd-icon-btn csd-icon-xl ms-2"
        ></fa-icon>
      </h4>
    </div>
  </div>
  <div [collapse]="isCollapsed">
    <div class="row g-0">
      <ng-container
        [ngTemplateOutlet]="gearColumn"
        [ngTemplateOutletContext]="{ columnGearList: firstColumn, column: 1 }"
      ></ng-container>
      <ng-container
        [ngTemplateOutlet]="gearColumn"
        [ngTemplateOutletContext]="{ columnGearList: secondColumn, column: 2 }"
      ></ng-container>
    </div>
    <div class="row g-0">
      <div class="col border border-dark text-center">
        <button class="csd-icon-btn csd-btn w-100" (click)="addGearRow()">
          <fa-icon [icon]="faPlus"></fa-icon>
        </button>
      </div>
    </div>
    <div class="row g-0">
      <div class="col border border-dark">Total Cost and Weight</div>
      <div class="col-2 border border-dark text-end">
        {{ gear.totalCost | number }}eb
      </div>
      <div class="col-2 border border-dark text-end">
        {{ gear.totalWeight | number }}kg
      </div>
    </div>
  </div>
</div>

<ng-template
  #gearColumn
  let-columnGearList="columnGearList"
  let-column="column"
>
  <div class="col-12 col-lg-6">
    <div class="row g-0">
      <div class="d-none d-lg-block col border border-dark">Type</div>
      <div class="d-none d-lg-block col-2 border border-dark text-center">
        Cost
      </div>
      <div class="d-none d-lg-block col-2 border border-dark text-center">
        Wt (kg)
      </div>
    </div>
    <div class="row g-0" *ngFor="let row of columnGearList; let i = index">
      <div class="col border border-dark pe-0 ps-0">
        {{ i }}
        <input
          #gearNameElem
          [(ngModel)]="row.gear"
          [typeahead]="gearDataList"
          typeaheadOptionField="name"
          (typeaheadOnSelect)="setDetails($event, i, column)"
          min="0"
          type="text"
          class="w-90"
        />
        <button
          class="csd-icon-btn csd-btn float-end pe-1"
          (click)="removeGearRow(i, column)"
        >
          <fa-icon [icon]="faTrash"></fa-icon>
        </button>
      </div>
      <div class="col-2 border border-dark pe-0 ps-0">
        <input
          [(ngModel)]="row.cost"
          class="text-end w-100"
          min="0"
          type="number"
          step="0.01"
        />
      </div>
      <div class="col-2 border border-dark pe-0 ps-0">
        <input
          [(ngModel)]="row.weight"
          class="text-center no-spinners w-100"
          min="0"
          type="number"
          step="0.01"
        />
      </div>
    </div>
  </div>
</ng-template>
